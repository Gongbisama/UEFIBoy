#Release environment
env = Environment(CC = 'gcc', 
                  CCFLAGS = '-O3 -g -std=c99 -W -Wall -Wextra')
        #-fomit-frame-pointer
#gcc --std=c99
env.Append(LIBS = ['SDL', 'X11'])
env.Append(LINKFLAGS = '')

coreObjects =env.Object( Glob('core/*.c'))
mmuObjects = env.Object( Glob('core/mmu/*.c'))
nonCoreObjects = env.Object( Glob('shared_libs/SDL/*.c'))
standardObjects = env.Object( Glob('platforms/standard/*.c'))
soundObjects = env.Object( Glob('shared_libs/SDL/*.cpp'))
soundObjects2 = env.Object( Glob('shared_libs/SDL/audio/*.cpp'))
#apuObjects = env.Object( Glob('core/sound/blaarg_sound/gb_apu/*.cpp'))
#boostObjects = env.Object( Glob('core/sound/blaarg_sound/boost/*.cpp'))

allObjects = coreObjects + mmuObjects + nonCoreObjects + standardObjects
allObjects = allObjects + soundObjects + soundObjects2# + apuObjects + boostObjects

env.Program('gb_emu',allObjects)

#Test environment
#coreTestEnv = Environment(CC = 'clang')
#cpuTestObjects = env.Object( Glob('core/memory.c')) + env.Object( Glob('core/IO.c')) + env.Object( Glob('core/timers.c'))
#coreTestObject = env.Object( Glob('core/tests/cpuTests.c'))
#allObjects = cpuTestObjects + coreTestObject

#coreTestEnv.Program('cpuTests', allObjects)
